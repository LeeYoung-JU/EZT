<!DOCTYPE html>
<html
  xmlns:th="https://www.thymeleaf.org/"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{common/layouts/default_layout}"
  layout:fragment="Content"
>
  <head>
    <meta charset="UTF-8" />
    <title>작업자 상세정보</title>
    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/freeps2/a7rarpress@main/swiper-bundle.min.css">
    <style>
      .slide-container{
        width: 100%;
        padding: 40px 0;
      }
      .slide-content{
        margin: 0 40px;
        overflow: hidden;
      }
      .image-content,
      .card-content{
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .image-content{
        position: relative;
      }
      .card-image{
        position: relative;
        background: #FFF;
      }
      .card-image .card-img{
        height: 100%;
        width: 100%;
        object-fit: cover;
      }
      .name{
        font-size: 18px;
        font-weight: 500;
        color: #333;
      }
      .description{
        font-size: 14px;
        color: #707070;
        text-align: center;
      }
      .swiper-navBtn{
        color: #89ba16;
        transition: color 0.3s ease;
      }
      .swiper-navBtn:hover{
        color: #7ba714;
      }
      .swiper-navBtn::before,
      .swiper-navBtn::after{
        font-size: 38px;
      }
      .swiper-button-next{
        right: 0;
      }
      .swiper-button-prev{
        left: 0;
      }
      .swiper-pagination-bullet{
        background-color: #89ba16;
        opacity: 1;
      }
      .swiper-pagination-bullet-active{
        background-color: #7ba714;
      }

      @media screen and (max-width: 768px) {
        .slide-content{
          margin: 0 10px;
        }
        .swiper-navBtn{
          display: none;
        }
      }

    </style>
  </head>
  <body>
    <div>
      <div class="row">
        <div class="col-4"><img th:src="|/display?fileName=${#strings.replace(userInfo.savePath, '\', '/')}/${userInfo.saveName}_${userInfo.originalFileName}.${userInfo.ext}|" alt="작업자 프로필" /></div>
        <div class="col-4">
          <p class="mb-1">이름: [[${userInfo.usersName}]]</p>
          <p class="mb-1">이름: [[${userInfo}]]</p>
          <p class="mt-3 mb-1">주 시공분야</p>
          <th:block th:each="cate : ${categories}">
            <span class="border rounded-4 pt-1 pb-1 px-2 bg-success text-light"
              >[[${cate.CATEGORY_CODE}]]</span
            >
          </th:block>
          <p class="mt-3 mb-1">주 활동지역</p>
          <th:block th:each="region : ${regions}">
            <span class="border rounded-4 pt-1 pb-1 px-2 bg-success text-light"
              >[[${region.REGION_CODE}]]</span
            >
          </th:block>
        </div>
        <div class="col-4">
          <p>경력사항</p>
          <th:block th:each="career : ${careers}">
            <span>[[${career.careerInfo}]]</span>
          </th:block>
          <p>자격증</p>
          <th:block th:each="licenses : ${licenses}">
            <span>[[${licenses.licenseInfo}]]</span>
          </th:block>
          <p>후기평점 : [[${avgReview}]]/5([[${cntReview}]])</p>
        </div>
      </div>
      <div class="row">
        <h5>포트폴리오</h5>
        <div class="slide-container swiper">
          <div class="slide-content">
            <div class="card-wrapper swiper-wrapper">
            <th:block th:each="pf : ${portfolioList}">
              <div  class="card swiper-slide">
                <div class="image-content" >
                  <div class="card-image" th:onclick="|location.href='@{/find/workerPortfolio(portfolioNo=${pf.portfolioNo})}'|">
                    <img th:src="|/display?fileName=${#strings.replace(pf.savePath, '\', '/')}/${pf.saveName}_${pf.originalFileName}.${pf.ext}|" class="card-img-top" alt="...">
                  </div>
                </div>
                <div class="card-content">
                  <p class="description">[[${pf.title}]]</p>
                </div>
              </div>
            </th:block>
          </div>
          <div class="swiper-button-next swiper-navBtn"></div>
          <div class="swiper-button-prev swiper-navBtn"></div>
          <div class="swiper-pagination"></div>
        </div>
      </div>
      </div>
      <div class="row">
        <h5>작업자가 받은 리뷰</h5>
        <div class="slide-container swiper">
          <div class="slide-content">
            <div class="card-wrapper swiper-wrapper">
                <th:block th:each="rev : ${reviewList}">
                  <div  class="card swiper-slide">
                    <div class="image-content">
                      <div class="card-image" th:onclick="|location.href='@{/review/info(reviewNo=${rev.reviewNo})}'|">
                        <img th:src="|/display?fileName=${#strings.replace(rev.savePath, '\', '/')}/${rev.saveName}_${rev.originalFileName}.${rev.ext}|" class="card-img-top" alt="...">
                      </div>
                    </div>
                    <div class="card-content">
                      <p class="description">[[${rev.star}]]</p>
                    </div>
                  </div>
                </th:block>
            </div>
            <div class="swiper-button-next swiper-navBtn"></div>
            <div class="swiper-button-prev swiper-navBtn"></div>
            <div class="swiper-pagination"></div>
          </div>
        </div>
      </div>
    </div>  
      <!-- Swiper JS -->
      <script src="//cdn.jsdelivr.net/gh/freeps2/a7rarpress@main/swiper-bundle.min.js"></script>

      <!-- JavaScript -->
      <script src="//cdn.jsdelivr.net/gh/freeps2/a7rarpress@main/script.js"></script>
      <script th:inline="javascript">

      var swiper = new Swiper(".slide-content", {
        slidesPerView: 5,
        spaceBetween: 25,
        loop: false,
        centerSlide: 'true',
        fade: 'true',
        grabCursor: 'true',
        pagination: {
          el: ".swiper-pagination",
          clickable: true,
          dynamicBullets: true,
        },
        navigation: {
          nextEl: ".swiper-button-next",
          prevEl: ".swiper-button-prev",
        },

        breakpoints:{
            0: {
                slidesPerView: 1,
            },
            200: {
                slidesPerView: 2,
            },
            400: {
                slidesPerView: 3,
            },
            600: {
                slidesPerView: 4,
            },
            800: {
                slidesPerView: 5,
            },
        },
      });

    </script>
  </body>
</html>
